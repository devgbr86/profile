<!DOCTYPE html>
<html lang="pt-BR">

<head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <meta name="description" content="@devcaffe - Personal Page">
     <link rel="icon" href="./img/favcoreicon.svg" type="image/svg+xml">
     <title>@devcaffe</title>

     <!-- UnoCSS -->
     <script src="https://cdn.jsdelivr.net/npm/@unocss/runtime/uno.global.js"></script>

     <!-- Marked.js -->
     <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

     <!-- DOMPurify -->
     <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.6/dist/purify.min.js"></script>

     <!-- Font -->
     <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&display=swap" rel="stylesheet">

     <style>
          :root {
               --bg: #f5f5f5;
               --fg: #000;
               --accent: #ff8c00;
               --card-bg: #fff;
               --border: #000;
               --code-bg: #282c34;
               --radius: 10px;
               --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
          }

          * {
               margin: 0;
               padding: 0;
               box-sizing: border-box;
          }

          body {
               font-family: 'Roboto Mono', monospace;
               background-color: var(--bg);
               color: var(--fg);
               line-height: 1.6;
               min-height: 100vh;
               display: flex;
               flex-direction: column;
          }

          /* NAVBAR */
          .navbar {
               position: fixed;
               top: 0;
               left: 0;
               width: 100%;
               background: #000;
               color: #fff;
               display: flex;
               align-items: center;
               justify-content: space-between;
               padding: 12px 24px;
               border-bottom: 2px solid var(--accent);
               box-shadow: var(--shadow);
               z-index: 1000;
          }

          .navbar-logo {
               display: flex;
               align-items: center;
               gap: 10px;
          }

          .navbar-logo img {
               width: 36px;
               height: 36px;
               border-radius: 6px;
               background: #fff;
               padding: 4px;
          }

          .navbar-links {
               display: flex;
               gap: 14px;
          }

          .navbar-link {
               color: #f5f5f5;
               text-decoration: none;
               padding: 8px 14px;
               border-radius: var(--radius);
               font-weight: 500;
               font-size: 15px;
               transition: all 0.2s ease;
          }

          .navbar-link:hover {
               background: rgba(255, 255, 255, 0.1);
          }

          .navbar-link.active {
               background: #fff;
               color: #000;
               font-weight: 700;
          }

          .menu-toggle {
               display: none;
               background: var(--accent);
               border: none;
               color: #fff;
               padding: 8px 12px;
               font-weight: 700;
               border-radius: var(--radius);
          }

          @media (max-width: 768px) {
               .navbar-links {
                    display: none;
                    flex-direction: column;
                    width: 100%;
                    background: #000;
                    position: absolute;
                    top: 60px;
                    left: 0;
                    border-top: 1px solid var(--accent);
               }

               .navbar-links.show {
                    display: flex;
               }

               .menu-toggle {
                    display: block;
               }
          }

          /* CONTENT */
          .main-wrapper {
               flex: 1;
               display: flex;
               justify-content: center;
               padding: 90px 16px 40px;
          }

          .content-wrapper {
               background: var(--card-bg);
               width: 100%;
               max-width: 880px;
               padding: 32px 26px;
               border-radius: var(--radius);
               box-shadow: var(--shadow);
               border: 1px solid rgba(0, 0, 0, 0.05);
          }

          /* MARKDOWN */
          .content-wrapper h1 {
               font-size: 2em;
               font-weight: 700;
               margin-top: 0;
               margin-bottom: 0.6em;
               border-bottom: 2px solid var(--border);
               padding-bottom: 6px;
          }

          .content-wrapper h2 {
               font-size: 1.5em;
               font-weight: 700;
               margin-top: 1.5em;
               margin-bottom: 0.5em;
               border-bottom: 1px solid var(--accent);
               padding-bottom: 4px;
          }

          .content-wrapper h3 {
               font-size: 1.25em;
               font-weight: 700;
               margin-top: 1.2em;
               margin-bottom: 0.5em;
          }

          .content-wrapper p {
               margin-bottom: 1em;
               font-size: 1em;
          }

          .content-wrapper a {
               color: var(--accent);
               font-weight: 600;
               text-decoration: none;
          }

          .content-wrapper a:hover {
               text-decoration: underline;
          }

          .content-wrapper code {
               background: #f5f5f5;
               color: var(--accent);
               padding: 0.25em 0.5em;
               border-radius: 4px;
               border: 1px solid #ddd;
               font-size: 0.95em;
          }

          .content-wrapper pre {
               background: var(--code-bg);
               color: #dfe6ee;
               padding: 18px;
               border-radius: var(--radius);
               border-left: 4px solid var(--accent);
               overflow-x: auto;
               margin: 1.2em 0;
               font-size: 0.9em;
          }

          .content-wrapper img {
               max-width: 100%;
               height: auto;
               border-radius: var(--radius);
               margin: 16px 0;
               box-shadow: var(--shadow);
          }

          footer {
               text-align: center;
               padding: 32px 20px;
               font-size: 13px;
               color: #666;
          }

          .badges {
               margin-top: 16px;
               display: flex;
               flex-wrap: wrap;
               justify-content: center;
               gap: 6px;
          }

          .badges img {
               height: 22px;
          }
     </style>
</head>

<body>
     <nav class="navbar">
          <div class="navbar-logo">
               <img src="./img/goatgreen.png" alt="@devcaffe logo">
          </div>
          <button class="menu-toggle" id="menuToggle">☰</button>
          <div class="navbar-links" id="navbarLinks"></div>
     </nav>

     <div class="main-wrapper">
          <main class="content-wrapper" id="content" role="main" aria-live="polite">
               <h1>Carregando conteúdo...</h1>
          </main>
     </div>

     <footer>

          <div class="badges">
               <img src="https://img.shields.io/badge/JavaScript-F7DF1E?logo=javascript&logoColor=000&style=for-the-badge"
                    alt="JavaScript">
               <img src="https://img.shields.io/badge/Node.js-339933?logo=node.js&logoColor=fff&style=for-the-badge"
                    alt="Node.js">
               <img src="https://img.shields.io/badge/Marked.js-000000?logo=markdown&logoColor=fff&style=for-the-badge"
                    alt="Marked.js">
               <img src="https://img.shields.io/badge/TailwindCSS-06B6D4?logo=tailwindcss&logoColor=fff&style=for-the-badge"
                    alt="TailwindCSS">
               <img src="https://img.shields.io/badge/Java-007396?logo=openjdk&logoColor=fff&style=for-the-badge"
                    alt="Java">
               <img src="https://img.shields.io/badge/Flutter-02569B?logo=flutter&logoColor=fff&style=for-the-badge"
                    alt="Flutter">
               <img src="https://img.shields.io/badge/Git-F05032?logo=git&logoColor=fff&style=for-the-badge" alt="Git">
          </div>



          <p><a href="https://github.com/devgbr86" target="_blank" rel="noopener noreferrer">github.com/devgbr86</a></p>

     </footer>

     <script>
          const contentFolder = 'pages/';
          const files = [
               { name: 'Home.md', label: 'Home' },
               { name: 'Stack.md', label: 'Frontend[Stack]' },
               { name: 'News.md', label: 'Newsletter' },
          ];

          const navLinks = document.getElementById('navbarLinks');
          const contentContainer = document.getElementById('content');
          const menuToggle = document.getElementById('menuToggle');

          function removeEmojis(text) {
               return text.replace(/[\p{Extended_Pictographic}\u{1F000}-\u{1F9FF}\u{2600}-\u{26FF}\u{2700}-\u{27BF}\u200D\uFE0F]/gu, '').trim();
          }

          function sanitizeHtml(html) {
               return DOMPurify.sanitize(html, {
                    ADD_TAGS: ['span', 'div'],
                    ADD_ATTR: ['class', 'style'],
                    FORBID_TAGS: ['script'],
               });
          }

          async function loadMarkdown(file = 'Home.md') {
               try {
                    const res = await fetch(`${contentFolder}${file}`);
                    if (!res.ok) throw new Error(`HTTP ${res.status}`);
                    let markdown = await res.text();
                    markdown = removeEmojis(markdown);

                    let rawHtml = marked.parse(markdown);
                    let sanitized = sanitizeHtml(rawHtml);

                    contentContainer.innerHTML = sanitized;
                    contentContainer.querySelectorAll('img').forEach(img => img.loading = 'lazy');
                    window.scrollTo({ top: 0, behavior: 'smooth' });

                    if (window.innerWidth < 768) navLinks.classList.remove('show');
               } catch (err) {
                    console.error(err);
                    contentContainer.innerHTML = `
          <h1>Erro ao carregar</h1>
          <p>Não foi possível carregar o arquivo <code>${file}</code>.</p>
          <p>Verifique se ele existe em <code>${contentFolder}</code> ou se o servidor está rodando.</p>`;
               }
          }

          files.forEach((file, index) => {
               const link = document.createElement('a');
               link.textContent = file.label;
               link.className = 'navbar-link';
               link.href = '#';
               if (index === 0) link.classList.add('active');

               link.addEventListener('click', e => {
                    e.preventDefault();
                    document.querySelectorAll('.navbar-link').forEach(l => l.classList.remove('active'));
                    link.classList.add('active');
                    loadMarkdown(file.name);
               });

               navLinks.appendChild(link);
          });

          menuToggle.addEventListener('click', () => {
               navLinks.classList.toggle('show');
          });

          document.addEventListener('DOMContentLoaded', () => {
               loadMarkdown(files[0].name);
          });
     </script>
</body>

</html>