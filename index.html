<!DOCTYPE html>
<html lang="pt-BR">

<head>
     <meta charset="UTF-8" />
     <meta name="viewport" content="width=device-width, initial-scale=1.0" />
     <meta name="description" content="@devcaffe - Personal Page" />
     <link rel="icon" href="./img/favcoreicon.svg" type="image/svg+xml" />
     <title>@devcaffe</title>

     <!-- UnoCSS -->
     <script src="https://cdn.jsdelivr.net/npm/@unocss/runtime/uno.global.js"></script>

     <!-- Marked.js -->
     <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

     <!-- DOMPurify -->
     <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.6/dist/purify.min.js"></script>

     <!-- Highlight.js -->
     <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css" />
     <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

     <!-- Mermaid.js -->
     <script src="https://cdn.jsdelivr.net/npm/mermaid@10.9.1/dist/mermaid.min.js"></script>

     <!-- Font -->
     <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&display=swap" rel="stylesheet" />

     <style>
          :root {
               --bg: #f5f5f5;
               --fg: #000;
               --accent: #ff8c00;
               --card-bg: #fff;
               --border: #000;
               --radius: 10px;
               --shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
          }

          * {
               margin: 0;
               padding: 0;
               box-sizing: border-box;
          }

          body {
               font-family: "Roboto Mono", monospace;
               background: var(--bg);
               color: var(--fg);
               display: flex;
               flex-direction: column;
               min-height: 100vh;
               line-height: 1.6;
               overflow-x: hidden;
          }

          /* Navbar fixa no topo */
          nav {
               position: fixed;
               top: 0;
               left: 0;
               width: 100%;
               background: #000;
               color: #fff;
               display: flex;
               justify-content: space-between;
               align-items: center;
               padding: 12px 24px;
               border-bottom: 2px solid var(--accent);
               z-index: 100;
          }

          .navbar-logo img {
               width: 38px;
               height: 38px;
               border-radius: 6px;
               background: #fff;
               padding: 4px;
               flex-shrink: 0;
          }

          .navbar-links {
               display: flex;
               gap: 14px;
               flex-wrap: wrap;
               align-items: center;
          }

          .navbar-link {
               color: #fff;
               text-decoration: none;
               padding: 6px 10px;
               border-radius: var(--radius);
               font-weight: 500;
               font-size: 14px;
               white-space: nowrap;
          }

          .navbar-link.active {
               background: #fff;
               color: #000;
               font-weight: 700;
          }

          @media (max-width: 768px) {
               nav {
                    padding: 10px 16px;
                    min-height: 54px;
               }

               .navbar-logo img {
                    width: 32px;
                    height: 32px;
               }

               .navbar-links {
                    gap: 8px;
                    flex: 1;
                    justify-content: flex-end;
               }

               .navbar-link {
                    font-size: 12px;
                    padding: 5px 8px;
               }
          }

          /* Espaço automático abaixo da navbar */
          main {
               flex: 1;
               max-width: 860px;
               margin: 0 auto 40px;
               background: var(--card-bg);
               border: 1px solid rgba(0, 0, 0, 0.05);
               border-radius: var(--radius);
               box-shadow: var(--shadow);
               padding: 34px 28px;
               width: 92%;
               margin-top: 96px;
          }

          @media (max-width: 768px) {
               main {
                    margin-top: 84px;
                    padding: 26px 20px;
                    width: 94%;
               }
          }

          main h1 {
               font-size: 2em;
               border-bottom: 2px solid var(--border);
               padding-bottom: 6px;
               margin-bottom: 0.6em;
          }

          main h2 {
               font-size: 1.5em;
               border-bottom: 1px solid var(--accent);
               margin-top: 1.5em;
               margin-bottom: 0.5em;
          }

          main h3 {
               font-size: 1.25em;
               margin-top: 1.2em;
               margin-bottom: 0.5em;
          }

          main p {
               margin-bottom: 1em;
          }

          main a {
               color: var(--accent);
               text-decoration: none;
               font-weight: 500;
          }

          main a:hover {
               text-decoration: underline;
          }

          main code {
               background: #f5f5f5;
               color: var(--accent);
               padding: 0.25em 0.5em;
               border-radius: 4px;
               border: 1px solid #ddd;
               font-size: 0.95em;
          }

          pre {
               background: #282c34;
               color: #dfe6ee;
               padding: 16px;
               border-radius: var(--radius);
               border-left: 4px solid var(--accent);
               overflow-x: auto;
               margin: 1.2em 0;
          }

          img {
               max-width: 100%;
               height: auto;
               border-radius: var(--radius);
               box-shadow: var(--shadow);
               margin: 16px 0;
          }

          footer {
               text-align: center;
               padding: 32px 20px;
               font-size: 13px;
               color: #666;
          }

          footer a {
               color: inherit;
               text-decoration: none;
          }
     </style>
</head>

<body>
     <nav>
          <div class="navbar-logo">
               <img src="./img/goatgreen.png" alt="@devcaffe logo" />
          </div>

          <div class="navbar-links" id="navbarLinks"></div>
     </nav>

     <main id="content">
          <h1>Carregando conteúdo...</h1>
     </main>

     <footer>
          <p><a href="https://github.com/devgbr86" target="_blank">github.com/devgbr86</a></p>

          <div style="margin-top: 12px; display: flex; flex-wrap: wrap; gap: 6px; justify-content: center;">
               <img src="https://img.shields.io/badge/JavaScript-F7DF1E?logo=javascript&logoColor=000&style=for-the-badge"
                    alt="JavaScript" />
               <img src="https://img.shields.io/badge/Node.js-339933?logo=node.js&logoColor=fff&style=for-the-badge"
                    alt="Node.js" />
               <img src="https://img.shields.io/badge/marked.js-000000?logo=markdown&logoColor=fff&style=for-the-badge"
                    alt="Marked.js" />
               <img src="https://img.shields.io/badge/TailwindCSS-06B6D4?logo=tailwindcss&logoColor=fff&style=for-the-badge"
                    alt="TailwindCSS" />
               <img src="https://img.shields.io/badge/Java-007396?logo=java&logoColor=fff&style=for-the-badge"
                    alt="Java" />
               <img src="https://img.shields.io/badge/Flutter-02569B?logo=flutter&logoColor=fff&style=for-the-badge"
                    alt="Flutter" />
               <img src="https://img.shields.io/badge/Git-F05032?logo=git&logoColor=fff&style=for-the-badge"
                    alt="Git" />
          </div>
     </footer>


     <script>
          const files = [
               { name: "Home.md", label: "Home" },
               { name: "Stack.md", label: "Frontend[Stack]" },
               { name: "News.md", label: "Newsletter" },
          ];

          const contentFolder = "pages/";
          const navLinks = document.getElementById("navbarLinks");
          const contentContainer = document.getElementById("content");

          function removeEmojis(text) {
               return text.replace(/[\p{Extended_Pictographic}]/gu, "").trim();
          }

          async function loadMarkdown(file = "Home.md") {
               try {
                    const res = await fetch(`${contentFolder}${file}`);
                    if (!res.ok) throw new Error(`HTTP ${res.status}`);
                    let markdown = removeEmojis(await res.text());
                    let html = marked.parse(markdown);
                    let clean = DOMPurify.sanitize(html);
                    contentContainer.innerHTML = clean;

                    contentContainer.querySelectorAll("pre code").forEach(el => hljs.highlightElement(el));

                    const mermaidBlocks = contentContainer.querySelectorAll("code.language-mermaid");
                    if (mermaidBlocks.length > 0) {
                         mermaid.initialize({ startOnLoad: false, theme: "default" });
                         for (const code of mermaidBlocks) {
                              const wrapper = document.createElement("div");
                              wrapper.classList.add("mermaid");
                              wrapper.textContent = code.textContent;
                              code.parentNode.replaceWith(wrapper);
                         }
                         await mermaid.run();
                    }

                    window.scrollTo({ top: 0, behavior: "smooth" });
               } catch (err) {
                    console.error(err);
                    contentContainer.innerHTML = `<h1>Erro ao carregar</h1><p>Não foi possível carregar o arquivo <code>${file}</code>.</p>`;
               }
          }

          files.forEach((file, index) => {
               const link = document.createElement("a");
               link.textContent = file.label;
               link.href = "#";
               link.className = "navbar-link";
               if (index === 0) link.classList.add("active");
               link.addEventListener("click", e => {
                    e.preventDefault();
                    document.querySelectorAll(".navbar-link").forEach(l => l.classList.remove("active"));
                    link.classList.add("active");
                    loadMarkdown(file.name);
               });
               navLinks.appendChild(link);
          });

          document.addEventListener("DOMContentLoaded", () => loadMarkdown(files[0].name));
     </script>
</body>

</html>