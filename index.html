<!DOCTYPE html>
<html lang="pt-BR">

<head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <meta name="description" content="@devcaffe">
     <link rel="icon" href="./img/favcoreicon.svg" type="image/svg+xml">
     <title>@devcaffe</title>

     <!-- Stack do Projeto:
       - TailwindCSS (via CDN)
       - Marked.js
       - Highlight.js
       - DOMPurify
  -->

     <!-- Tailwind CSS -->
     <script src="https://cdn.tailwindcss.com"></script>

     <!-- Marked.js -->
     <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

     <!-- Highlight.js -->
     <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
     <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

     <!-- DOMPurify -->
     <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.6/dist/purify.min.js"></script>

     <!-- Fonte -->
     <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&display=swap" rel="stylesheet">

     <style>
          html {
               scroll-behavior: smooth;
          }

          body {
               font-family: 'Roboto Mono', monospace;
               background-color: whitesmoke;
               color: #000;
               line-height: 1.75;
               padding-top: 110px;
          }

          /* Navbar */
          .navbar {
               position: fixed;
               top: 0;
               left: 0;
               width: 100%;
               background-color: #000;
               color: #fff;
               display: flex;
               align-items: center;
               flex-wrap: wrap;
               gap: 14px;
               border-bottom: 1px solid #222;
               box-shadow: 0 2px 6px rgba(0, 0, 0, 0.25);
               padding: 10px 24px;
               z-index: 1000;
          }

          .navbar-icon {
               width: 28px;
               height: 28px;
               border-radius: 4px;
               background-color: #fff;
               padding: 2px;
               flex-shrink: 0;
          }

          .navbar-link {
               color: #f8f9fa;
               text-decoration: none;
               font-size: 15px;
               padding: 4px 10px;
               border-radius: 4px;
          }

          .navbar-link.active {
               background-color: #fff;
               color: #000;
               font-weight: 600;
          }

          /* Conteúdo principal */
          .content-wrapper {
               max-width: 880px;
               margin: 80px auto 100px;
               padding: 48px 52px;
               background-color: #fff;
               border-radius: 10px;
               border: 1px solid #000;
               box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
          }

          .content-wrapper h1,
          .content-wrapper h2,
          .content-wrapper h3,
          .content-wrapper h4,
          .content-wrapper h5 {
               color: #000;
               font-weight: 600;
               scroll-margin-top: 130px;
               line-height: 1.3;
          }

          .content-wrapper h1 {
               font-size: 2.4em;
               border-bottom: 3px solid #000;
               padding-bottom: 16px;
               margin-bottom: 32px;
          }

          .content-wrapper h2 {
               font-size: 1.9em;
               border-bottom: 2px solid #f0f0f0;
               margin-top: 52px;
               margin-bottom: 22px;
               padding-bottom: 10px;
          }

          .content-wrapper h3 {
               font-size: 1.5em;
               margin-top: 40px;
               margin-bottom: 18px;
          }

          .content-wrapper p {
               margin-bottom: 22px;
          }

          .content-wrapper ul,
          .content-wrapper ol {
               margin-left: 32px;
               margin-bottom: 26px;
          }

          .content-wrapper li {
               margin-bottom: 10px;
          }

          .content-wrapper code {
               background-color: #f3f3f3;
               color: #d35400;
               padding: 3px 7px;
               border-radius: 4px;
               border: 1px solid #ccc;
               font-size: 0.9em;
          }

          .content-wrapper pre {
               background-color: #0d1117;
               padding: 22px 26px;
               border-radius: 8px;
               border-left: 4px solid #ff8c00;
               overflow-x: auto;
               margin: 34px 0;
          }

          .content-wrapper pre code {
               color: #c9d1d9;
               font-size: 0.9em;
               line-height: 1.6;
          }

          .content-wrapper blockquote {
               border-left: 4px solid #000;
               background-color: #f6f6f6;
               padding: 20px 26px;
               border-radius: 5px;
               margin: 32px 0;
               font-style: italic;
               color: #222;
          }

          .content-wrapper img {
               max-width: 100%;
               border-radius: 8px;
               margin: 36px 0;
               border: 1px solid #000;
               box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
          }

          .content-wrapper table {
               width: 100%;
               border-collapse: collapse;
               margin: 36px 0;
               border: 1px solid #000;
               border-radius: 8px;
               overflow: hidden;
          }

          .content-wrapper th,
          .content-wrapper td {
               border: 1px solid #000;
               padding: 12px 16px;
               text-align: left;
          }

          .content-wrapper th {
               background-color: #f2f2f2;
               font-weight: 600;
          }

          .content-wrapper tr:nth-child(even) {
               background-color: #fafafa;
          }

          .content-wrapper a {
               color: #ff8c00;
               text-decoration: none;
               font-weight: 500;
          }

          .content-wrapper hr {
               border: none;
               border-top: 2px solid #000;
               margin: 44px 0;
          }

          /* Footer */
          footer {
               text-align: center;
               padding: 40px 20px;
               font-size: 14px;
               color: #333;
          }

          footer a {
               color: #000;
               font-weight: 600;
               border-bottom: 2px solid #ff8c00;
               text-decoration: none;
          }

          /* Responsividade */
          @media (max-width: 768px) {
               body {
                    padding-top: 90px;
               }

               .navbar {
                    padding: 8px 16px;
                    gap: 10px;
               }

               .navbar-link {
                    font-size: 14px;
                    padding: 3px 7px;
               }

               .content-wrapper {
                    margin: 40px 14px 70px;
                    padding: 28px 22px;
               }

               .content-wrapper h1 {
                    font-size: 2em;
               }

               .content-wrapper h2 {
                    font-size: 1.5em;
               }

               .content-wrapper h3 {
                    font-size: 1.25em;
               }
          }
     </style>
</head>

<body>
     <nav class="navbar" id="nav-links" role="navigation" aria-label="Navegação principal">
          <img src="./img/favcoreicon.svg" alt="Logo Dev Wiki" class="navbar-icon">
     </nav>

     <main class="content-wrapper" id="content" role="main">
          <h1>Carregando conteúdo...</h1>
     </main>

     <footer>
          <p>
               <a href="https://github.com/devgbr86" target="_blank" rel="noopener noreferrer">github.com/devgbr86</a>
               &nbsp;•&nbsp;
               <a href="https://www.linkedin.com/in/devgbr" target="_blank"
                    rel="noopener noreferrer">linkedin.com/in/devgbr</a>
               &nbsp;•&nbsp;
               <a href="mailto:topverbs@gmail.com">topverbs@gmail.com</a>
          </p>
     </footer>

     <script>
          const contentFolder = 'pages/';
          const files = [
               { name: 'Home.md', label: 'Home' },
               { name: 'Stack.md', label: 'Stack' },
               { name: 'Newsletter.md', label: 'Newsletter' }
          ];

          const navContainer = document.getElementById('nav-links');
          const contentContainer = document.getElementById('content');

          function removeEmojis(text) {
               return text.replace(/[\p{Extended_Pictographic}]/gu, '').trim();
          }

          async function loadMarkdown(file = 'Home.md') {
               try {
                    const res = await fetch(`${contentFolder}${file}`);
                    if (!res.ok) throw new Error(`HTTP ${res.status}`);

                    const markdown = await res.text();
                    const cleanMarkdown = removeEmojis(markdown);
                    const rawHtml = marked.parse(cleanMarkdown);
                    const sanitized = DOMPurify.sanitize(rawHtml, { ADD_TAGS: ['span', 'div'], ADD_ATTR: ['id', 'class'] });
                    contentContainer.innerHTML = sanitized;

                    contentContainer.querySelectorAll('pre code').forEach(block => hljs.highlightElement(block));
                    contentContainer.querySelectorAll('img').forEach(img => img.setAttribute('loading', 'lazy'));

                    window.scrollTo({ top: 0, behavior: 'smooth' });
               } catch (err) {
                    contentContainer.innerHTML = `
          <h1>Erro ao carregar</h1>
          <p>Não foi possível carregar o arquivo <code>${file}</code>.</p>
          <p>Verifique se ele existe em <code>${contentFolder}</code>.</p>
        `;
               }
          }

          files.forEach((file, index) => {
               const link = document.createElement('a');
               link.textContent = file.label;
               link.className = 'navbar-link';
               link.href = '#';
               if (index === 0) link.classList.add('active');
               link.addEventListener('click', e => {
                    e.preventDefault();
                    document.querySelectorAll('.navbar-link').forEach(l => l.classList.remove('active'));
                    link.classList.add('active');
                    loadMarkdown(file.name);
               });
               navContainer.appendChild(link);
          });

          document.addEventListener('DOMContentLoaded', () => {
               loadMarkdown(files[0].name);
          });
     </script>
</body>

</html>